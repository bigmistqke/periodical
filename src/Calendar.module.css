.calendarContainer {
  overflow: auto;
  height: 100%;
}

.calendar {
  display: grid;
  grid-template-rows: calc(var(--size-row) * 3) 1fr;
  overflow: hidden;
  color: var(--color-front);
  padding-inline: calc(var(--margin) * 2);

  & > header {
    display: flex;

    justify-content: center;
    align-items: center;
    font-weight: 300;

    & > [data-corvu-calendar-label] {
      font-size: 1.25rem;
      line-height: 1.25rem;
      font-family: 'Inter Tight', sans-serif;
      font-optical-sizing: auto;
      font-weight: 300;
    }

    & [data-corvu-calendar-nav] {
      border: none;
      background-color: transparent;
      padding: 5px;
      aspect-ratio: 1 / 1;
      height: 100%;

      &:focus-visible {
        outline: none;
        border: 2px solid var(--color-border-focus-visible);
      }
    }
  }

  & [data-corvu-calendar-name]:hover {
    background-color: var(--color-bg-hover);
  }

  & [data-corvu-calendar-table] {
    align-self: stretch;
    justify-self: stretch;
    margin-inline: 5px;
    border-collapse: collapse;
  }

  & td {
    border-collapse: collapse;
    vertical-align: bottom;
    inset: -1px;
  }

  & tr > span,
  & tr > td {
    display: table-cell;
    height: calc(var(--size-row) * 2);
  }

  & th {
    opacity: 0.65;
    padding-bottom: var(--margin);
    width: 2rem;
    font-size: 0.75rem;
    line-height: 1rem;
    font-weight: inherit;
    font-family: 'Space Mono', monospace;
    vertical-align: bottom;
    text-align: left;
    padding-inline: calc(var(--margin) / 2);
  }

  & .indicator {
    margin-inline: -2px;
    margin-bottom: -1px;
    z-index: var(--z-indicator);
    align-self: end;
    height: var(--margin);
    position: relative;
  }

  & [data-corvu-calendar-cell] {
    background-color: transparent;
    font-family: 'Space Mono', monospace;
    color: inherit;
    position: relative;
    margin: var(--margin);
    font-size: var(--size-xs-font);
    line-height: var(--size-xs-font);
    background-color: var(--color-bg-calendar);

    &::before {
      counter-reset: variable var(--day-of-month);
      content: counter(variable);
      position: absolute;
      top: 0px;
      right: 0px;
      bottom: -1px;
      left: -1px;
      border: 1px solid var(--color-border);
      padding: var(--margin);
      font-size: var(--size-xs-font);
      line-height: var(--size-xs-font);
    }

    &.today::before {
      border: 2px solid var(--color-front);
      z-index: var(--z-border-today);
    }

    &.past {
      & .indicator {
        filter: brightness(50%);
      }
      &::before {
        opacity: 0.5;
      }
    }
  }

  & [data-corvu-calendar-cell][data-today] {
    border: 2px solid var(--color-border-today);
  }

  /**********************************************************************************/
  /*                                                                                */
  /*                                   Top Radii                                    */
  /*                                                                                */
  /**********************************************************************************/

  & tr:first-of-type [data-corvu-calendar-cell]:first-of-type {
    &::before {
      border-top-left-radius: var(--size-radius);
    }
  }

  & [data-corvu-calendar-cell][data-phase='period'] .indicator {
    background-color: var(--color-period);
  }

  & [data-corvu-calendar-cell][data-phase='ovulation'] .indicator {
    background-color: var(--color-ovulation);
  }

  & [data-corvu-calendar-cell][data-start] .indicator {
    border-top-left-radius: var(--size-radius);
  }

  & [data-corvu-calendar-cell][data-end] .indicator {
    border-top-right-radius: var(--size-radius);
  }

  & [data-corvu-calendar-cell][data-day-of-period='0'] .indicator {
    border-top-left-radius: var(--size-radius);
  }

  & tr:first-of-type [data-corvu-calendar-cell]:last-of-type::before {
    border-top-right-radius: var(--size-radius);
  }

  &:not(:has(tr:first-of-type [data-corvu-calendar-cell][data-day]:first-child))
    tr:nth-child(2)
    [data-corvu-calendar-cell]:first-child::before {
    border-top-left-radius: var(--size-radius);
  }

  /**********************************************************************************/
  /*                                                                                */
  /*                                 Bottom Radii                                   */
  /*                                                                                */
  /**********************************************************************************/

  & tr:last-of-type [data-corvu-calendar-cell]:first-of-type::before {
    border-bottom-left-radius: var(--size-radius);
  }

  & tr:last-of-type [data-corvu-calendar-cell]:last-of-type::before {
    border-bottom-right-radius: var(--size-radius);
  }

  & tr:last-of-type [data-corvu-calendar-cell][data-day]:last-of-type .indicator {
    border-bottom-right-radius: var(--size-radius);
  }

  & tr:last-of-type [data-corvu-calendar-cell][data-day]:first-child .indicator {
    border-bottom-left-radius: var(--size-radius);
  }

  &:not(:has(tr:last-of-type [data-corvu-calendar-cell][data-day]:last-child))
    tr:nth-last-child(2)
    [data-corvu-calendar-cell]:last-child {
    & .indicator,
    &::before {
      border-bottom-right-radius: var(--size-radius);
    }
  }
}
